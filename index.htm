<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>공공데이터포탈</title>
</head>
<body>
	<select id="region">
		<option value="6480000" name="경상남도">경상남도</option>
		<option value="5360000" name="밀양시">밀양시</option>
		<option value="5670000" name="창원시">창원시</option>
		<option value="5410000" name="창녕군">창녕군</option>
		<option value="5370000" name="거제시">거제시</option>
		<option value="5330000" name="통영시">통영시</option>
		<option value="5350000" name="김해시">김해시</option>
		<option value="5380000" name="양산시">양산시</option>
		<option value="5400000" name="함안군">함안군</option>
		<option value="5460000" name="함양군">함양군</option>
		<option value="5440000" name="하동군">하동군</option>
		<option value="5310000" name="진주시">진주시</option>
		<option value="5340000" name="사천시">사천시</option>
		<option value="5430000" name="남해군">남해군</option>
		<option value="5470000" name="거창군">거창군</option>
		<option value="5480000" name="합천군">합천군</option>
		<option value="5390000" name="의령군">의령군</option>
		<option value="5420000" name="고성군">고성군</option>
		<option value="5450000" name="산청군">산청군</option>
	  </select>
	<input type="text" id="dateFrom" class="flatpickr">
	<input type="text" id="dataTo" class="flatpickr">
	<button onclick="getAPI()">API 호출</button>
	<p id="response"></p>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.js" integrity="sha512-rdDpUud7/Gn1+xZ34rn7JkRp5+g9X9dGLvH5PQoB70+AvY1AdzRMHxPxLKQ2js8Fhzg/P9k9wu/fy18tWl0tGg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="app.js"></script>
	<script>
    function callApi() {
			alert("start")
			const regionvalue = document.getElementById('region').value;
			const dateFrom = document.getElementById('dateFrom').value;
			const dataTo = document.getElementById('dataTo').value;
			// 공공데이터 api
			const url = 'https://apis.data.go.kr/1140100/minAnalsInfoView5/minStaticsInfo5?serviceKey=%2BFt24AieBZS226pLyjL27AFUlgQNvW5fiuAZAGXldP%2FsyRgKEe3ose2K%2FPbQ1kaOuxGg3HQkAHtCTeZjIA06UA%3D%3D&period=MONTHLY&sortBy=NAME&sortOrder=true&target=pttn%2Cdfpt%2Csaeol%2Cprpl%2Cqna%2Cqna_origin&dateFrom='+dataFrom+'&dateTo='+dateTo+'&mainSubvalue='+regionvalue;

			fetch(url)
				.then(res => res.json())
				.then(myJson => {
					alert("end")
					console.log(myJson);
				})
		}
    
  </script>
</body>
</html>
